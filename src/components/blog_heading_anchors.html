<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Make headings clickable to update URL
        document.querySelectorAll('.blog-post h2[id], .blog-post h3[id]').forEach(heading => {
            // Prevent anchor link from navigating
            const anchor = heading.querySelector('a.heading-anchor');
            if (anchor) {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    e.stopPropagation();
                });
            }

            // Make entire heading clickable
            heading.style.cursor = 'pointer';
            heading.addEventListener('click', function (e) {
                const id = this.getAttribute('id');
                if (id) {
                    const newUrl = window.location.pathname + '#' + id;
                    history.pushState(null, null, newUrl);
                    this.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });

        // Smooth scroll to anchor on page load
        if (window.location.hash) {
            const target = document.querySelector(window.location.hash);
            if (target) {
                setTimeout(() => {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 100);
            }
        }
    });
</script>
